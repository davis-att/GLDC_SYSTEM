<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="#{loginBean.template}">

            <ui:define name="content">
                  <h:form enctype="multipart/form-data">
                    <p:growl id="growl" showDetail="true" life="4000" />          
                    <p:panel header="Insertar Registro en Bitácora" style="margin-bottom:10px;">  
                        <h:panelGrid columns="2" cellpadding="5">   
                            <h:outputLabel for="instr_bitacora" value="Tipo Bitácora:"/>                            
                            <p:selectOneMenu id="instr_bitacora" onchange="$('#tabform').submit();" value="#{ingresarBean.instr_bitacora}" >  
                                <f:selectItem itemLabel="Escoger Bitácora" itemValue="NA" />  
                                <f:selectItems id="selectMenu2" 
                                               value="#{catalogoBitacoras.listaBitacoras}"
                                               var="c" itemLabel="#{c.bitacoras}" 
                                               itemValue="#{c.bitacoras}"/>                                         
                            </p:selectOneMenu>

                            <h:outputText  value="Título Incidente: "  />
                            <p:inputText id="instr_incidente" value="#{ingresarBean.instr_incidente}" required="true" label="instr_incidente"/>      

                            <h:outputText value="Fecha Inicio:" />  
                            <p:calendar value="#{ingresarBean.instr_fecha}" pages="2" effect="explode"  pattern="MM/dd/yyyy HH:mm"  />  
                            <h:outputText value="#{ingresarBean.instr_fecha}" id="instr_fecha">  
                            </h:outputText>  

                            <b></b>
                            <h:outputText value="Fecha Fin:" />  
                            <p:calendar value="#{ingresarBean.instr_fecha_fin}" pages="2" effect="explode"  pattern="MM/dd/yyyy HH:mm"  />  
                            <h:outputText value="#{ingresarBean.instr_fecha_fin}" id="instr_fecha_fin">  
                            </h:outputText>  

                            <b></b>
                            <h:outputLabel for="instr_responsable" value="Responsable:"/>                            
                            <p:selectOneMenu id="instr_responsable" onchange="$('#tabform').submit();" value="#{ingresarBean.instr_responsable}" >                               
                                <f:selectItem itemLabel="Escoger Responsable" itemValue="Administrador" />  
                                <f:selectItems id="selectMenu" 
                                               value="#{catalogoUsuarios.listaUsuarios}"
                                               var="c" itemLabel="#{c.usuarios}" 
                                               itemValue="#{c.usuarios}"/>                                               
                            </p:selectOneMenu>

                            <h:outputLabel for="instr_area" value="Seguimiento con:"/>                            
                            <p:selectOneMenu id="instr_area" onchange="$('#tabform').submit();" value="#{ingresarBean.instr_area}" >                               
                                <f:selectItem itemLabel="Escoger Area" itemValue="GAT" />  
                                <f:selectItems id="selectMenu1" 
                                               value="#{catalogoAreas.listaAreas}"
                                               var="c" itemLabel="#{c.areas}" 
                                               itemValue="#{c.areas}"/> 
                            </p:selectOneMenu>

                            <h:outputText  value="No.Ticket: "  />
                            <p:inputText id="instr_ticket" value="#{ingresarBean.instr_ticket}" required="true" label="instr_ticket"/>                      

                            <h:outputText  value="Estimación: "  />
                            <p:inputText id="instr_mimpacto" value="#{ingresarBean.instr_mimpacto}" required="true" label="instr_mimpacto"/>  

                            <h:outputText  value="Justificación: "  />
                            <p:inputText id="instr_justificacion" value="#{ingresarBean.instr_justificacion}" required="true" label="instr_justificacion"/> 

                            <h:outputLabel for="instr_estatus" value="Estatus:"/>                            
                            <p:selectOneMenu id="instr_estatus" onchange="$('#tabform').submit();" value="#{ingresarBean.instr_estatus}" >                               
                                <f:selectItem itemLabel="Escoger Estatus" itemValue="SE" />  
                                <f:selectItem itemLabel="Cerrado" itemValue="Cerrado" />  
                                <f:selectItem itemLabel="Abierto" itemValue="Abierto" />                                              
                            </p:selectOneMenu>

                            <p:fileUpload   fileUploadListener="#{ingresarBean.upload}" label="Buscar Evidencia" 
                                            uploadLabel="Carga Evidencia" cancelLabel="Cancelar" auto="FALSE" update="growl" />

                        </h:panelGrid>   
                        <p:separator />             

                        <p:commandButton ajax="false" value="Insertar Registro"  action="#{ingresarBean.IngresarBitacora(actionEvent)}"  update="growl"/> 

                    </p:panel>                          
                </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
