<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>

<script type="text/javascript">
            
      
    
function skinDona() {
    this.cfg.shadow = false;   
    this.cfg.grid = {
        background: 'transparent' ,
        borderColor: 'transparent',
        gridLineColor: '#F5F5F5',
        shadow: false
    };
    this.cfg.axesDefaults = {
        rendererOptions: {
            textColor: '#666F77'
        }
    };

    this.cfg.seriesDefaults.rendererOptions = {
        showDataLabels: true
    },
    this.cfg.legend = {
      show : true,
        location : 'w',
        fontSize: '16px',           
        background: 'transparent',
        border : 'none',
        placement : 'outsideGrid',
        numberColumns : 1,
        numberRows: 1
         
    },      
    
    this.cfg.series = 
                            [
                            {seriesColors: ["#17C7F6", "#F6EF17","#65D681"]}, 
                            {seriesColors: ["#637598", "#F6EF17","#65D681"]},
                            {seriesColors: ["#E67E22", "#F6EF17","#65D681"]},
                            {seriesColors: ["#F5F3B3", "#F6EF17","#65D681"]},
                            {seriesColors: ["#2AB0CC", "#F6EF17","#65D681"]}
                            ]
        
            
}

function skinDona_p1() {
    this.cfg.shadow = false;   
    this.cfg.grid = {
        background: 'transparent' ,
        borderColor: 'transparent',
        gridLineColor: '#F5F5F5',
        shadow: false
    };
    this.cfg.axesDefaults = {
        rendererOptions: {
            textColor: '#666F77'
        }
    };

    this.cfg.seriesDefaults.rendererOptions = {
        showDataLabels: true
    },
    this.cfg.legend = {
      show : true,
        location : 'w',
        fontSize: '16px',           
        background: 'transparent',
        border : 'none',
        placement : 'outsideGrid',
        numberColumns : 1,
        numberRows: 1
         
    },      
    
    this.cfg.series = 
                            [
                            {seriesColors: ["#17C7F6", "#65D681"]} 
                            ]
        
            
}


function skinDona_p2() {
    this.cfg.shadow = false;   
    this.cfg.grid = {
        background: 'transparent' ,
        borderColor: 'transparent',
        gridLineColor: '#F5F5F5',
        shadow: false
    };
    this.cfg.axesDefaults = {
        rendererOptions: {
            textColor: '#E68166'
        }
    };

    this.cfg.seriesDefaults.rendererOptions = {
        showDataLabels: true
    },
    this.cfg.legend = {
      show : true,
        location : 'w',
        fontSize: '16px',           
        background: 'transparent',
        border : 'none',
        placement : 'outsideGrid',
        numberColumns : 1,
        numberRows: 1
         
    },      
    
    this.cfg.series = 
                            [
                            {seriesColors: ["#637598", "#65D681"]} 
                            ]
        
            
}


function skinDona_p3() {
    this.cfg.shadow = false;   
    this.cfg.grid = {
        background: 'transparent' ,
        borderColor: 'transparent',
        gridLineColor: '#F5F5F5',
        shadow: false
    };
    this.cfg.axesDefaults = {
        rendererOptions: {
            textColor: '#666F77'
        }
    };

    this.cfg.seriesDefaults.rendererOptions = {
        showDataLabels: true
    },
    this.cfg.legend = {
      show : true,
        location : 'w',
        fontSize: '16px',           
        background: 'transparent',
        border : 'none',
        placement : 'outsideGrid',
        numberColumns : 1,
        numberRows: 1
         
    },      
    
    this.cfg.series = 
                            [
                            {seriesColors: ["#E67E22", "#65D681"]} 
                            ]
        
            
}


function skinDona_p4() {
    this.cfg.shadow = false;   
    this.cfg.grid = {
        background: 'transparent' ,
        borderColor: 'transparent',
        gridLineColor: '#F5F5F5',
        shadow: false
    };
    this.cfg.axesDefaults = {
        rendererOptions: {
            textColor: '#666F77'
        }
    };

    this.cfg.seriesDefaults.rendererOptions = {
        showDataLabels: true
    },
    this.cfg.legend = {
      show : true,
        location : 'w',
        fontSize: '16px',           
        background: 'transparent',
        border : 'none',
        placement : 'outsideGrid',
        numberColumns : 1,
        numberRows: 1
         
    },      
    
    this.cfg.series = 
                            [
                            {seriesColors: ["#F5F3B3", "#65D681"]} 
                            ]
        
            
}


function skinDona_p5() {
    this.cfg.shadow = false;   
    this.cfg.grid = {
        background: 'transparent' ,
        borderColor: 'transparent',
        gridLineColor: '#F5F5F5',
        shadow: false
    };
    this.cfg.axesDefaults = {
        rendererOptions: {
            textColor: '#666F77'
        }
    };

    this.cfg.seriesDefaults.rendererOptions = {
        showDataLabels: true
    },
    this.cfg.legend = {
      show : true,
        location : 'w',
        fontSize: '16px',           
        background: 'transparent',
        border : 'none',
        placement : 'outsideGrid',
        numberColumns : 1,
        numberRows: 1
         
    },      
    
    this.cfg.series = 
                            [
                            {seriesColors: ["#2AB0CC", "#65D681"]} 
                            ]
        
            
}

function barext() {
     this.cfg.seriesDefaults = {
                    renderer: $.jqplot.BarRenderer,
                    shadow: true,
                    shadowAlpha: 0.9,
                    shadowAngle: 135,
                    background: 'transparent',
                    borderColor: 'transparent',                    
                    pointLabels: {show: true, formatString: "%'.0f"}
                },
                this.cfg.grid = {
                    drawGridLines: false, // wether to draw lines across the grid or not.
                    gridLineColor: 'transparent', // *Color of the grid lines.
                    background: 'transparent',
                    borderColor: 'transparent',
                    borderWidth: 0.1, // pixel width of border around grid.
                    shadow: false, // draw a shadow for grid.
                    shadowAngle: 45, // angle of the shadow.  Clockwise from x axis.
                    shadowOffset: 1.5, // offset from the line of the shadow.
                    shadowWidth: 1, // width of the stroke for the shadow.
                    shadowDepth: 1, // Number of strokes to make when drawing shadow.
                    shadowAlpha: 0.5           // Opacity of the shadow
                },
                
                this.cfg.legend = {
                show : true,
                  location : 'ne',
                  fontSize: '16px',           
                  background: 'transparent' ,
                  border : 'none',
                  placement : 'outsideGrid',
                  numberColumns : 4,
                  numberRows: 1,
                  shadowAngle: 45
              };
            
}


                
</script>

<style type="text/css">
    .column1 {
        width:40%;
        padding:6px;
    }
 
    .column2 {
        width:60%;
        padding:4px;
    }
  
    .old {
             background-color: #fca752 !important;
             background-image: none !important;
             color: #000000 !important;
    }
    
</style>        
        
    </h:head>
    
    <body>

        <ui:composition template="#{loginBean.template}">

            <ui:define name="content">
               
                <p:growl id="messages" showDetail="true"  life="2000"  sticky="true" />

                <p:dialog id="Dialog" header="Sentencias de uso" widgetVar="dlg2"  height="100">    
                    <h:outputText value="exec-ListaArchivos -- Para ejecutar la carga de lista de archivos" 
                                  style="font-style: italic ; font-size: 12px; margin-left: 30px"/>
                    <br/>
                    <h:outputText value="exec-ResConsec -- Para ejecutar el resumen del reporte de Consecutivos" 
                                  style="font-style: italic ; font-size: 12px; margin-left: 30px"/>
                    <br/>
                    <h:outputText value="exec-ResEte -- Para ejecutar el resumen de End-To-End" 
                                  style="font-style: italic ; font-size: 12px; margin-left: 30px"/>               
                    <br/>              
                </p:dialog> 

                <h:form id="f1" enctype="multipart/form-data">

      
                    <p:poll listener="#{mostrarStatusJobs.onIdle}" update="messages,panelmonitor" interval="60" />
        
        
                    <p:panel  id="panelmonitor" header="Monitoreo de procesos GLDC" style=" text-align:  center;  font-size:  larger">
                    
                        <p:panelGrid  columns="2"  columnClasses="column1, column2" style=" width: 100%; text-align:  center; align-content:  center">
                    
                        <p:chart type="donut" model="#{mostrarStatusJobs.model}"  style=" width: 100%;  height: 600px"  styleClass="skinDona" /> 
                        
                        <p:panelGrid columns="2"  style=" width: 100%; text-align:  center; align-content:  center">
                    
                            
                            <p:chart type="donut" model="#{mostrarStatusJobs.mode_prima1}"  style=" width: 100%; height: 300px"  styleClass="skinDona_p1" /> 
                            <p:chart type="donut" model="#{mostrarStatusJobs.mode_prima2}"  style=" width: 100%; height: 300px"  styleClass="skinDona_p2" />
                            <p:chart type="donut" model="#{mostrarStatusJobs.mode_prima3}"  style=" width: 100%; height: 300px"  styleClass="skinDona_p3" />
                            <p:chart type="donut" model="#{mostrarStatusJobs.mode_prima4}"  style=" width: 100%; height: 300px"  styleClass="skinDona_p4" />
                               
                      
                    
                     </p:panelGrid>  
                        
                    
                     </p:panelGrid>    
                        
                        <p:separator style="height:10px" />
                        
                        
                          
                            <p:panelGrid columns="1"  style=" height: 300px; width: 70%; text-align:  center; margin-left: 12em">   
                                
                                <p:chart type="bar" model="#{mostrarStatusJobs.modelbar}"  styleClass="barext"    />
                                
                            </p:panelGrid>    
                        
                          <p:separator style="height:10px" />
                        
                    <p:panelGrid columns="1"  style=" width: 70%; text-align:  center; margin-left: 12em">    
                        
                    <p:dataTable   var="statusJobs" value="#{mostrarStatusJobs.statusJobs}" id="dataTable"
                                   style="font-size: 18px ; width: 100% ; " 
                                   rowStyleClass="#{statusJobs.FINALSTATUS == 'FAIL' ? 'old' : null}"
                                   scrollRows="25"  
                                   scrollable="true" 
                                   liveScroll="true" 
                                   emptyMessage="No se tiene registro" 
                                   paginator="true"
                                   paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                   rowsPerPageTemplate="25,50,75"
                                   filteredValue="#{mostrarStatusJobs.filteredProcesados}" >

                         <p:column id="idjob" headerText="ID_JOB" style=" ;width: 20px"
                                   filterBy="#{statusJobs.ID_JOB }"    
                                   filterMatchMode="contains" >  
                             <h:outputText value="#{statusJobs.ID_JOB}" />  
                        </p:column>
                        
                        <p:column id="jobName" headerText="JOB" style=" ;width: 50px">  
                            <h:outputText value="#{statusJobs.JOBNAME}" />  
                        </p:column>  
                        
                        <p:column id="jobGroup" headerText="JOB_GROUP" style=" ;width: 50px">  
                            <h:outputText value="#{statusJobs.JOBGROUP}" />  
                        </p:column>  
                        
                         <p:column id="horaInicio" headerText="HORA INICIO"  style="width: 100px">  
                            <h:outputText value="#{statusJobs.HORAINICIO}" />  
                        </p:column> 


                        <p:column id="horaFin" headerText="HORA FIN"  style="width: 100px">  
                            <h:outputText value="#{statusJobs.HORAFIN}" />  
                        </p:column> 

                        <p:column id="finalStatus" headerText="ESTATUS" style="width: 30px">  
                            <h:outputText value="#{statusJobs.CURRENTSTATUS}" />  
                        </p:column>   
                     
                        
                        <p:column id="finalSalida" headerText="SALIDA" style="width: 30px">  
                            <h:outputText value="#{statusJobs.FINALSTATUS}" />  
                        </p:column>   
                    </p:dataTable>    

                    <p:commandButton value="Refresh" update=":f1:dataTable" icon="ui-icon-arrowrefresh-1-w"
                                     style="color: crimson  ;font-size: 11px ; margin-left: 40px ; margin-top:10px">
                    </p:commandButton>
                    
                    </p:panelGrid>
                   </p:panel>     
                    
                </h:form> 
            </ui:define>

        </ui:composition>
         <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false">  
                    <p:graphicImage value="../resources/images/ajax-loader-roller.gif" />  
                </p:dialog>

    </body>
</html>
