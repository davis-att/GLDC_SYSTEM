<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pe="http://primefaces.org/ui/extensions">

    <h:head>
       <meta http-equiv="refresh" content="#{facesContext.externalContext.sessionMaxInactiveInterval};url=#{request.contextPath}/"></meta>
    
        <title>GLDC System</title>

         <style type="text/css">       
            
            .estatusdiag .ui-dialog-titlebar{
                       display:none !important; 
            }
            
           .davispanel {
                font-size: 9px !important;
                background-color:  transparent !important;
                font-family: Segoe UI !important;
                vertical-align:  middle;
                width: 30px !important;
            }

            .old {
             background-color: #fca752 !important;
             background-image: none !important;
             color: #000000 !important;
            }
            
            .new {
             background-color: #52B4FC !important;
             background-image: none !important;
             color: #000000 !important;
            }
            
            .ui-growl {
                font-style: normal;
                font-size: 100%!important;
                width: 25em!important;

            }
            
        </style>

        <style type="text/css">
    /* Custom styles for the Timeline */  
    div.timeline-frame {  
        border-color: #5D99C3;  
        border-radius: 5px;  
    }  
 
    div.timeline-axis {  
        border-color: #5D99C3;  
        background-color: #5D99C3;  
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#5D99C3', endColorstr='#3A6DA0') alpha(opacity = 100);  
        background: -webkit-gradient(linear, left top, left bottom, from(#5D99C3), to(#3A6DA0));  
        background: -moz-linear-gradient(top,  #5D99C3,  #3A6DA0);  
        -khtml-opacity: 1;  
        -moz-opacity: 1;  
        opacity: 1;  
    }  
 
    div.timeline-groups-axis {  
        border-color: #5D99C3;  
    }  
 
    div.timeline-groups-axis-onleft {  
        border-style: none solid none none;  
    }  
 
    div.timeline-axis-text {  
        color: white;  
    }  
 
    div.timeline-event {  
        color: white !important;  
        border-radius: 5px !important;  
    }  
 
    div.timeline-event-content {  
        padding: 5px;  
        text-shadow: none;  
    }  
 
    div.unavailable {  
        background: #F03030 none !important;  /* red */  
        border-color: #bd2828 !important;     /* red */  
    }  
 
    div.available {  
        background: #1AA11A none !important;  /* green */  
        border-color: #136e13 !important;     /* green */  
    }  
 
    div.maybe {  
        background: #FFA500 none !important;  /* orange */  
        border-color: #cc8100 !important;     /* orange */  
    }  
 
    div.timeline-event-selected {  
        background: #BECEFE none !important;  
        border-color: #97B0F8 !important;  
    }  
    
</style>
 

        <script type="text/javascript" >
            function gl() {
                //this = chart widget instance
                this.cfg.seriesDefaults = {
                    rendererOptions: {
                        smooth: true
                    },
                    showMarker: true


                },
                this.cfg.grid = {
                    drawGridLines: true, // wether to draw lines across the grid or not.
                    gridLineColor: '#cccccc', // *Color of the grid lines.
                    background: '#D7F6B7', // CSS color spec for background color of grid.
                    borderColor: '#999999', // CSS color spec for border around grid.
                    borderWidth: 2.0, // pixel width of border around grid.
                    shadow: true, // draw a shadow for grid.
                    shadowAngle: 45, // angle of the shadow.  Clockwise from x axis.
                    shadowOffset: 1.5, // offset from the line of the shadow.
                    shadowWidth: 3, // width of the stroke for the shadow.
                    shadowDepth: 3, // Number of strokes to make when drawing shadow.
                    shadowAlpha: 0.5      // Opacity of the shadow
                },
                this.cfg.axes = {
                    yaxis: {
                        labelOptions: {fontFamily: 'Segoe UI', fontSize: '10pt'},
                        tickOptions: {
                            fontSize: '8pt',
                            formatString: "%'.0f",
                            min:0
                        }
                    },
                    xaxis: {
                        pad: 1.05,
                        renderer: $.jqplot.CategoryAxisRenderer,
                        rendererOptions: {
                            tickRenderer: $.jqplot.CanvasAxisTickRenderer
                        },
                        labelOptions: {fontFamily: 'Segoe UI', fontSize: '10pt'},
                        labelRenderer: $.jqplot.CanvasTextRenderer,
                        tickOptions: {
                            fontSize: '8pt',
                            angle: 90,
                            markSize: 2,
                            formatString: '%s/'
                        }
                    }
                },
                this.cfg.axes.xaxis.ticks = this.cfg.categories;


            }
        </script>         

                <script type="text/javascript" >
            function glf() {
                //this = chart widget instance
                this.cfg.seriesDefaults = {
                    rendererOptions: {
                        smooth: true
                    },
                    showMarker: true


                },
                this.cfg.grid = {
                    drawGridLines: true, // wether to draw lines across the grid or not.
                    gridLineColor: '#cccccc', // *Color of the grid lines.
                    background: '#D7F6B7', // CSS color spec for background color of grid.
                    borderColor: '#999999', // CSS color spec for border around grid.
                    borderWidth: 2.0, // pixel width of border around grid.
                    shadow: true, // draw a shadow for grid.
                    shadowAngle: 45, // angle of the shadow.  Clockwise from x axis.
                    shadowOffset: 1.5, // offset from the line of the shadow.
                    shadowWidth: 3, // width of the stroke for the shadow.
                    shadowDepth: 3, // Number of strokes to make when drawing shadow.
                    shadowAlpha: 0.5      // Opacity of the shadow
                },
                this.cfg.axes = {
                    yaxis: {
                        labelOptions: {fontFamily: 'Segoe UI', fontSize: '10pt'},
                        tickOptions: {
                            fontSize: '8pt',
                            formatString: "%'.2f"
                        }
                    },
                    xaxis: {
                        pad: 1.05,
                        renderer: $.jqplot.CategoryAxisRenderer,
                        rendererOptions: {
                            tickRenderer: $.jqplot.CanvasAxisTickRenderer
                        },
                        labelOptions: {fontFamily: 'Segoe UI', fontSize: '10pt'},
                        labelRenderer: $.jqplot.CanvasTextRenderer,
                        tickOptions: {
                            fontSize: '8pt',
                            angle: 90,
                            markSize: 2,
                            formatString: '%s/'
                        }
                    }
                },
                this.cfg.axes.xaxis.ticks = this.cfg.categories;


            }
        </script>  
        
    </h:head>

    <body>
        
        <ui:include src="/templates/sessionTimeOut.xhtml" />
        <ui:composition template="./templateGatWebTool.xhtml">

            <ui:define name="content">

                <p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();"/>

                <h:form id="form">  

                        <p:growl 
                        id="messages" 
                        life="10000"
                        showDetail="true"/>
 
                        
                     <p:panel header="Consulta de números azules"  style="width: auto; text-align:  center"> 
                         
                <p:panelGrid style="width: 100%; height: 5%" >
                    <p:row style="height: 20px">                                                                       
                        <p:column rowspan="2" style="width: 8%;  height: 10%">
                            <h:outputText value="Por favor ingresa el DN: " style="text-align:center; font-size: small;  font-family: cursive; width:  100%"/>  
                        </p:column> 
                         <p:column style="width: 5%">                                
                             <p:inputTextarea id="ptn" style="width:auto; text-height: auto "  value="#{timelinecentro.ptnCorte}"  >                               
                             </p:inputTextarea>                                                                                                                                      
                        </p:column>
                        
   
                                              
                        <p:column style="width: 11%">
                            <p:commandButton  id="boton" value="Consultar" action="#{timelinecentro.ConsultarPtn(actionEvent, loginBean.username)}"  update=":form:messages, :form:ptn, :form:resultados, :form:resultados2, :form:resultados3" style="text-align:center ;  font-size:    small;  width:  50% " >
                              
                            </p:commandButton > 

                        </p:column> 
                        <p:column style="width: 11%">
                             <h:outputText  
                                value="Solo admite un número de 10 dígitos" style="font-style: italic; font-size: 80%"/>
                        </p:column>
                        
                    </p:row>
                    
                </p:panelGrid>
                
                 </p:panel>
                
                 <h3 style="  height:40px; font-size:large">Ciclo de vida del número</h3>
                 <p:separator />
                                     
                        
                        <p:panel  id="resultados"  
                                  style="width: auto; text-align:center; font-size:  small"  visible="#{timelinecentro.mostrarpanel}"> 


                    <p:timeline id="timeline" value="#{timelinecentro.model}" 
                          selectable="#{timelinecentro.selectable}"
                          zoomable="#{timelinecentro.zoomable}"
                          moveable="#{timelinecentro.moveable}"
                          stackEvents="#{timelinecentro.stackEvents}"
                          axisOnTop="#{timelinecentro.axisOnTop}"
                          eventStyle="#{timelinecentro.eventStyle}"
                          showCurrentTime="#{timelinecentro.showCurrentTime}"
                          showNavigation="#{timelinecentro.showNavigation}"
                          timeZone="UTC-5" 
                          
                          >
     
                        <p:ajax   event="select"    listener="#{timelinecentro.onSelect}"  process="@this"  update=":form:messages"/> 
                        
                        <f:facet name="menu">
                       <p:commandButton type="button" icon="pi pi-chevron-left" onclick="PF('timelineWdgt').move(-0.3);" />
                       <p:commandButton type="button" icon="pi pi-chevron-right" onclick="PF('timelineWdgt').move(0.3);" />
                       <p:commandButton type="button" icon="pi pi-search-minus" onclick="PF('timelineWdgt').zoom(-0.5);" />
                       <p:commandButton type="button" icon="pi pi-search-plus" onclick="PF('timelineWdgt').zoom(0.5);" />
                       </f:facet>
 
                    <f:facet name="loading">
                        <i class="pi pi-spin pi-spinner" style="font-size: 3em"></i>
                    </f:facet>
                        
                </p:timeline>



                   </p:panel>     
                
                 <h3 style="height:40px; font-size:large">Historico de transacciones mdns</h3>
                 <p:separator />
  
 
                        <p:panel  id="resultados2"  
                                  style="width: auto; text-align:center;  font-size:  small"  visible="#{timelinecentro.mostrarpanel}"> 


                    
                          <p:dataTable id="dataTable"   
                                     var="mostrarProcesados"  
                                     value="#{ timelinecentro.tab_detalle }" 
                                     widgetVar="procesadosTable"  
                                     scrollRows="100"  
                                     scrollable="true" 
                                     liveScroll="true" 
                                     emptyMessage="No se tiene registro" 
                                     paginator="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="10,20,30"
                                     style=" font-size:10px; font-family:  Segoe UI; width: auto; margin:  auto;"
                                     rowStyleClass="#{mostrarProcesados.ER == null ? 'old' : null} "
                                     filteredValue="#{timelinecentro.filteredProcesados}" 
                                     >  
                                        
                             <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_MDN" 
                                      headerText="MSISDN">    
                                 <h:outputText value="#{mostrarProcesados.MSISDN}" />  
                            </p:column>
                              <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_EMSISDN" 
                                      headerText="EMSISDN">    
                                  <h:outputText value="#{mostrarProcesados.EMSISDN}" />  
                            </p:column> 
                              
                             <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_EFFECTIVE" 
                                      headerText="EFFECTIVE DATE">    
                                 <h:outputText value="#{mostrarProcesados.EFFECTIVE_DATE}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_EXPIRATION" 
                                      headerText="EXPIRATION DATE">    
                                <h:outputText value="#{mostrarProcesados.ER}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_SUBSCRIBER_ID" 
                                      headerText="SUBSCRIBER_ID">    
                                <h:outputText value="#{mostrarProcesados.AGREEMENT_NO}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_IMSI" 
                                      headerText="IMSI">    
                                <h:outputText value="#{mostrarProcesados.IMSI}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_UFMI" 
                                      headerText="UFMI">    
                                <h:outputText value="#{mostrarProcesados.UFMI}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="id_EIMSI" 
                                      headerText="EIMSI">    
                                <h:outputText value="#{mostrarProcesados.EIMSI}" />  
                            </p:column>
                              
                                        
                                        
                                    </p:dataTable>

             
                                
                   </p:panel>      
                                       
                 <h3 style="height:40px; font-size:large">Datos del suscriptor</h3>
                 <p:separator />
                 
                         <p:panel  id="resultados3" 
                                  style="width: auto; text-align:center;  font-size:  small"  visible="#{timelinecentro.mostrarpanel}"> 


                    
                          <p:dataTable id="dataTable2"   
                                     var="mostrarSubscritor"  
                                     value="#{ timelinecentro.tab_detalle_2}" 
                                     widgetVar="procesadosTable"  
                                     scrollRows="5"  
                                     scrollable="true" 
                                     liveScroll="true" 
                                     emptyMessage="No se tiene registro" 
                                     paginator="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15"
                                     style=" font-size:10px; font-family:  Segoe UI; width: auto; margin:  auto;"
                                     rowStyleClass="#{mostrarSubscritor.SUB_STATUS == 'A' ? 'old' : null}"
                                     filteredValue="#{timelinecentro.filteredProcesados_2}" 
                                     >  
                                        
                             <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="ACCOUNT_PRE" 
                                      headerText="ACCOUNT_PRE">    
                                 <h:outputText value="#{mostrarSubscritor.CUENTA_PRE}" />  
                            </p:column>
                              <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="ACCOUNT_POS" 
                                      headerText="ACCOUNT_POS">    
                                  <h:outputText value="#{mostrarSubscritor.CUENTA_POS}" />  
                            </p:column> 
                              
                             <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="CUSTOMER_ID" 
                                      headerText="CUSTOMER_ID">    
                                 <h:outputText value="#{mostrarSubscritor.CUSTOMER_ID}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="SUBSCRIBER_NO" 
                                      headerText="SUBSCRIBER_NO">    
                                <h:outputText value="#{mostrarSubscritor.SUBSCRIBER_NO}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="MSISDN" 
                                      headerText="MSISDN">    
                                <h:outputText value="#{mostrarSubscritor.DN}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="SUB_STATUS" 
                                      headerText="SUB_STATUS">    
                                <h:outputText value="#{mostrarSubscritor.SUB_STATUS}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="INIT_ACT_DATE" 
                                      headerText="INIT_ACT_DATE">    
                                <h:outputText value="#{mostrarSubscritor.INIT_ACT_DATE}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="SUB_STATUS_DATE" 
                                      headerText="SUB_STATUS_DATE">    
                                <h:outputText value="#{mostrarSubscritor.SUB_STATUS_DATE}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="NOMBRE_CLIENTE" 
                                      headerText="NOMBRE_CLIENTE">    
                                <h:outputText value="#{mostrarSubscritor.NOMBRE_CLIENTE}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="DIRECCION" 
                                      headerText="DIRECCION">    
                                <h:outputText value="#{mostrarSubscritor.DIRECCION}" />  
                            </p:column>
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="MODALITY" 
                                      headerText="MODALITY">    
                                <h:outputText value="#{mostrarSubscritor.MODALITY}" />  
                            </p:column> 
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="ACTIVATION_DATE" 
                                      headerText="ACTIVATION_DATE">    
                                <h:outputText value="#{mostrarSubscritor.ACTIVATION_DATE}" />  
                            </p:column> 
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="RFC" 
                                      headerText="RFC">    
                                <h:outputText value="#{mostrarSubscritor.RFC}" />  
                            </p:column> 
                            <p:column style="text-align:center; font-size: medium; font-size: 12px" 
                                      id="CUSTTP_DESC" 
                                      headerText="CUSTTP_DESC">    
                                <h:outputText value="#{mostrarSubscritor.CUSTTP_DESC}" />  
                            </p:column>   
                                        
                                        
                                    </p:dataTable>

             
                                
                   </p:panel>                           
                         
   
                </h:form>   


            </ui:define>

        </ui:composition>

                    <p:dialog modal="true" widgetVar="statusDialog"  
                      closable="false"  
                      resizable="false"
                      showEffect="drop"
                      hideEffect="drop"
                      position="center"
                      style="border: none; box-shadow: none;  background: transparent"
                      styleClass="estatusdiag"
                      >  
                <p:graphicImage value="../resources/images/ajax_att.gif"  />   
            </p:dialog> 
        
    </body>
</html>
