<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
 
     
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"></link>
        <link rel="stylesheet" type="text/css" href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css"></link>
          
    
    <h:head>
     
  <meta http-equiv="refresh" content="#{facesContext.externalContext.sessionMaxInactiveInterval};url=#{request.contextPath}/"></meta>        
        
        <h:outputStylesheet library="css" name="bootstrap.min.css"/>
        <h:outputScript library="js" name="bootstrap.min.js"/>
        <h:outputStylesheet library="css" name="font-awesome.min.css"/>
        <h:outputScript library="js" name="fontawesome.min.js"/>


     <style type="text/css">       
            
       .hide
        {
        display:none;
        visibility:hidden;
        }
        
        .normal{
                background-color:  #58D68D; 
                color:  black !important; 
        }      
        .comida{
                background-color:  #FFFB9C; 
                color:  black !important; 
        }   
        
        .botonadd {
                background-image: url(/resources/images/queue/addicon.PNG)
            }
            
        .botonremove {
                background-image: url(/resources/images/queue/removeicon.PNG)
            }
            
            .header {
    color: #36A0FF;
    font-size: 27px;
    padding: 10px;
}

.bigicon {
    font-size: 35px;
    color: #36A0FF;
}


    
</style>   
       
<style type="text/css">  
    
.botons .ui-button{
      background: none;
       background-color:  #2F4254;
 }

.ui-button.ui-state-hover, .ui-button.ui-state-active{
     border: none;
}

    
</style>

<style type="text/css">      

            .menubar_estilo {

                width:  500px !important; 
                font-size: 25px !important; 
                font-style:    normal;
                font-family: Corbel Light;
                background-color:  #000000 !important; 
                border-color:  transparent !important; 

            }
            
            .menusletra_estilo {
                color:    #000000
            }
        </style>      

 <style type="text/css">        
.hor-minimalist-b
{
font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
font-size: 12px;
border-collapse:  inherit;
text-align:  center;
 

}

.hor-minimalist-b .ui-datatable .ui-datatable-header,.ui-datatable .ui-datatable-footer{
	text-align:center;padding:5px 5px;
        
}


.hor-minimalist-b  .ui-datatable thead th,.ui-datatable tbody td,.ui-datatable tfoot td{
	padding:8px 8px;
	overflow:hidden;
	white-space:nowrap;
	border-width:1px;
        border-color:  transparent;
        width:  auto;
        
}

.hor-minimalist-b  .ui-datatable-scrollable-footer, .ui-datatable-scrollable-body, .ui-datatable-scrollable-footer-box td{
	 background-color:   #2F4254 !important;
         border-color:  transparent !important;
         font-size: 15px;
}



.hor-minimalist-b th
{
font-size: 15px;
font-weight: normal;
color:  #5a5a5a;
padding: 5px 5px;
border-bottom: transparent;
}
.hor-minimalist-b td
{
font-size: 15px;    
border-bottom:  transparent;
color:  #5a5a5a;
padding: 2px 2px;
 border-color:  transparent;
 width:  auto;

}  


</style>    
        
        
          <style type="text/css">
            .columna1 {
                width: 50% !important;
                height: 300px;
                margin:  auto;
            }
            .columna2 {
                width: 90%;
                height: 300px;
                margin:  auto;
            }
     
            
        </style>        

        
<style type="text/css">
    body{
background:#eee;
font-family: 'Corbel Light', Corbel Light;
}
.main-part{
width:80%;
margin:0 auto;
text-align: center;
padding: 0px 5px;
}
.cpanel{
width:24%;
display: inline-block;
background-color:#34495E;
color:#fff;
margin-top: 50px;
margin-bottom: 50px;
}
.icon-part i{
font-size: 30px;
padding:10px;
border:1px solid #fff;
border-radius:50%;
margin-top:-25px;
margin-bottom: 10px;
background-color:#34495E;
}
.icon-part p{
margin:0px;
font-size: 20px;
padding-bottom: 10px;
}
.card-content-part{
background-color: #2F4254;
padding: 5px 0px;
}
.cpanel .card-content-part:hover{
background-color: #5a5a5a;
cursor: pointer;
}
.card-content-part a{
color:#fff;
text-decoration: none;
}
.cpanel-green .icon-part,.cpanel-green .icon-part i{
background-color: #16A085;
}
.cpanel-green .card-content-part{
background-color: #149077;
}
.cpanel-orange .icon-part,.cpanel-orange .icon-part i{
background-color: #F39C12;
}
.cpanel-orange .card-content-part{
background-color: #DA8C10;
}
.cpanel-blue .icon-part,.cpanel-blue .icon-part i{
background-color: #2980B9;
}
.cpanel-blue .card-content-part{
background-color:#2573A6;
}
.cpanel-red .icon-part,.cpanel-red .icon-part i{
background-color:#E74C3C;
}
.cpanel-red .card-content-part{
background-color:#CF4436;
}
.cpanel-skyblue .icon-part,.cpanel-skyblue .icon-part i{
background-color:#8E44AD;
}
.cpanel-skyblue .card-content-part{
background-color:#803D9B;
}
</style>  

        
        
        
        <script type="text/javascript">
                PrimeFaces.locales["esp"] = {
                closeText: "Cerrar",
                prevText: "Anterior",
                nextText: "Siguiente",
                monthNames: ["Enero","Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                monthNamesShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
                dayNames: ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"],
                dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
                dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
                weekHeader: "Semana",
                chooseTIME: "Tiempo",
                firstDay: 0,
                isRTL: false,
                                showMonthAfterYear: false,
                                yearSuffix: "",
                                timeOnlyTitle: "Solo hora",
                                timeText: "Tiempo",
                                hourText: "Hora",
                                minuteText: "Minuto",
                                secondText: "Segundo",
                                currentText: "Fecha actual",
                                ampm: false,
                                month: "Mes",
                                week: "Semana",
                                day: "Día",
                                allDayText: "Todo el día"
                            };
        </script>
        

        
    </h:head>

    
    <body>

   

                
                    <p:growl id="growl"  life="10000"  showDetail="true" />
                
                    <h:form id="fp">            
                    
                    <p:panel  id="hola">
                            <h8 style="font-family: Corbel Light; font-size: 30px; margin-top:   auto " > Queue Management. </h8>
                              <h7 style="float: right; font-family: Corbel Light; font-size: 30px; margin-top:   auto " > Banco de Trabajo </h7>
                       <br/>
                       <br/>
                     
                        
                        
                       <h8 style="font-family: Corbel Light; font-size: 20px; margin-top:   auto " > Usuario: </h8>
                       
                       <p:graphicImage  id="imagenf" value="../resources/images/gldc/GLDC.png" width="45px"  height="45px" 
                                           rendered="#{!queue_bancot.bandsesion}"   style="margin:auto; border-radius: 30px; border: 1px solid   red; padding: 1px "  />  
                          
                         <p:graphicImage  id="imagenf2" value="../resources/images/gldc/GLDC.png" width="45px" height="45px"  
                                          rendered="#{queue_bancot.bandsesion}"    style="margin:auto; border-radius: 30px; border: 1px solid    green; padding: 1px  "  /> 
                          
                          
                       <h8 style="font-family: Corbel Light; font-size: 23px; margin-top:   auto;  font-weight:bold " > #{loginBean.username} </h8>
                         &nbsp;&nbsp;
                       <h8 style="font-family: Corbel Light; font-size: 20px; margin-top:   auto; " > Estatus: </h8>
                       
                       <h:outputText  id="conec1" value="&nbsp;&nbsp;&nbsp;&nbsp;Conectado&nbsp;&nbsp;&nbsp;&nbsp;" style="font-family: Corbel Light; font-size: 23px; margin-top:   auto ; font-weight:bold ;background-color:  green;  border-radius: 15px; color: #fff;  "
                                      rendered="#{queue_bancot.bandsesion}"/>
                     
                       <h:outputText id="desconec1" value="&nbsp;&nbsp;&nbsp;&nbsp;Desconectado&nbsp;&nbsp;&nbsp;&nbsp;" style="font-family: Corbel Light; font-size: 23px; margin-top:   auto ; font-weight:bold ;background-color:  red;  border-radius: 15px; color: #fff;  "
                                     rendered="#{!queue_bancot.bandsesion}"/>
                     

                       <h:outputText id="tsolicitado" value="&nbsp;&nbsp;&nbsp;&nbsp;Tiemposolicitado: &nbsp; #{queue_bancot.stiempo- queue_bancot.pooltiempof} &nbsp; min &nbsp;&nbsp;&nbsp;" style="font-family: Corbel Light; font-size: 23px; margin-top:   auto ; font-weight:bold ;background-color:   #36A0FF;  border-radius: 15px; color: #fff;  "
                                     rendered="#{queue_bancot.bpooltf}"/>
                      
          
                       
                         
                    
                           <p:commandButton  id="blogout" rendered="#{queue_bancot.bandsesion}"  value="Logout" actionListener="#{queue_bancot.logout(loginBean.username)}" style=" float: right; width: 150px; height: 35px;  background:   #CF4436; border-radius: 20px; color: #fff; "
                                              update="growl,conec1, desconec1, hola,imagenf,imagenf2" styleClass="p-mr-2" icon="pi pi-check"> 
                                <p:confirm header="Confirmación" message="Deseas cerrar sesión?" />
                            </p:commandButton>

 
                        <p:commandButton id="blogin"  value="Login" rendered="#{!queue_bancot.bandsesion}"  actionListener="#{queue_bancot.login(loginBean.username)}"   style="float: right; width: 150px; height: 35px;  background:  #198754; border-radius: 20px;"
                                               update="growl,conec1, desconec1, hola,imagenf,imagenf2 " styleClass="btn btn-primary" icon="pi pi-check">
                                <p:confirm header="Confirmación" message="Estas listo para iniciar?" />
                            </p:commandButton>
                            
               
                        <p:commandLink id="idtiempo"  value="Solicitar tiempo" rendered="#{queue_bancot.bandsesion and !queue_bancot.bpooltf }"  style="float: right; width: 170px; height: 35px;   background:   #0d6efd; border-radius: 20px; color:  #fff"
                                               update="growl,hola,idpool " styleClass="btn btn-primary" oncomplete="PF('dialogtiempo').show();" >
                          </p:commandLink>
                    
                       
                       
                      
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" />
                            </p:confirmDialog>  
                
                            <br/>
                                <p:separator  style="height:1px;  background-color:  #000000 " />    
                            
                                
                                
   
                     
                </p:panel>      
                        
                        
                                             <p:dialog widgetVar="dialogtiempo" header="Solicitud de tiempo" showEffect="fade" hideEffect="fade">
                        <h:panelGrid columns="2" cellpadding="7">
                        
                            <p:outputLabel value="Seleeciona el tiempo deseado" />
                         
                             
                            <p:selectOneRadio id="console" value="#{queue_bancot.stiempo}" >
                                    <f:selectItem itemLabel="15 min " itemValue="15"/>
                                    <f:selectItem itemLabel="30 min " itemValue="30"/>
                                    <f:selectItem itemLabel="45 min " itemValue="45"/>
                                    <f:selectItem itemLabel="60 min " itemValue="60"/>
                                </p:selectOneRadio>

                                
                                
                          </h:panelGrid>   

                        <div class="p-d-flex p-jc-between p-mt-3">
                            <p:commandButton id="addButton_d2" value="Confirmar" actionListener="#{queue_bancot.solictatiempo(loginBean.username)}"
                                             onclick="idpool.start(),idpoolg.stop()"    oncomplete="PF('dialogtiempo').hide();PF('tsolicitado').update();" update="growl, hola,idpool, idpoolg"/>
                        </div>
                    </p:dialog>            
                      
                        
                         <p:poll  id="idpool" interval="1" listener="#{queue_bancot.Restatiempofuera()}" update="tsolicitado, hola, idtiempo,idpoolg"   widgetVar="idpool" autoStart="false" />
                         <p:poll id="idpoolg" listener="#{queue_bancot.onIdle}" update="growl, :form, :fp, :form:tbanco " interval="20"   widgetVar="idpoolg" />
                        
                </h:form>             

                    
                    
                    
                
                     
                     
                     
                     
                     
 
                 
             <h:form id="form"> 
                   
                     <div class="main-part">
                         <div class="cpanel">
                             <div class="icon-part">
                                 <i class="fa fa-users" aria-hidden="true"></i><br/>
                                 <small>Solicitudes Atendidas</small>
                                 <p>#{queue_bancot.sol_atendidas}</p>
                             </div>
                             <div class="card-content-part">
                                 <a href="#">Mas detalle </a>
                             </div>
                         </div>
                         <div class="cpanel cpanel-green">
                             <div class="icon-part">
                                 <i class="fa fa-star-o" aria-hidden="true"></i><br/>
                                 <small>Última atención</small>
                                 <p>#{queue_bancot.sol_ultima}</p>
                             </div>
                             <div class="card-content-part">
                                 <a href="#">Mas detalles </a>
                             </div>
                         </div>
                         <div class="cpanel cpanel-orange">
                             <div class="icon-part">
                                 <i class="fa fa-bell" aria-hidden="true"></i><br/>
                                 <small>Solicitudes Exigentes</small>
                                 <p>#{queue_bancot.sol_urgente} New</p>
                             </div>
                             <div class="card-content-part">
                                 <a href="#">More Details </a>
                             </div>
                         </div>
                         <div class="cpanel cpanel-blue">
                             <div class="icon-part">
                                 <i class="fa fa-tasks" aria-hidden="true"></i><br/>
                                 <small>Solicitudes Abiertas</small>
                                 <p>#{queue_bancot.sol_abierta}</p>
                             </div>
                             <div class="card-content-part">
                                 <a href="#">More Details </a>
                             </div>
                         </div>


                     </div>                            

 
                     
                     
                     
                     <p:panelGrid columns="2" styleClass="columna1, columna2" >

                         <p:column>
                         
                             <table class="table align-middle mb-0 bg-white" style=" width: 650px">
                             <thead class="bg-light">
                                 <tr>
                                     <th>Tipo de Solicitud</th>
                                     <th>Token</th>
                                     <th>Fecha Registro</th>

                                 </tr>
                             </thead>
                             <tbody>
                             
                                     <h:outputText value="#{queue_bancot.codigo}" escape="false"   />
                               
                             </tbody>
                         </table>
                
                        </p:column>
                    
                         
                     
                     <p:dataTable id="tbanco" 
                                var="bancot" 
                                value="#{queue_bancot.bancoT}"
                               emptyMessage="No hay registros" 
                               widgetVar="vargeneral"
                               selection="#{queue_bancot.selectedEventoBitacora}"
                               paginator="true" rows="20"  
                               styleClass="hor-minimalist-b" style=" width: 95%;   margin:  auto"
                               paginatorTemplate="{PageLinks}"  paginatorPosition="bottom"          
                                  >
                         
                         
                         
                         
                         <p:column id="id_queue"  style=" width: 120px" headerText="id_queue"  >  
                                <h:outputText value="#{bancot.id_queue}" />  
                            </p:column>  
                            
                         <p:column id="id_token" headerText="id_token"  filterMatchMode="contains" filterStyle="width: 180px" filterBy="#{bancot.id_token}"   >  
                                <h:outputText value="#{bancot.id_token}" />  
                            </p:column>  
                         
                         <p:column id="ticket_number" headerText="ticket_number" filterMatchMode="contains" filterStyle="width: 150px" filterBy="#{bancot.ticket_number}"    >  
                                <h:outputText value="#{bancot.ticket_number}" />  
                            </p:column>  
                         
                         <p:column id="estatus"  style=" width: 150px; " headerText="estatus" filterMatchMode="contains" filterStyle="width: 100px" filterBy="#{bancot.estatus}"  >  
                             <h:outputText value="#{bancot.estatus}" style="background-color: #{bancot.codigoc};   color: #fff; border-radius:10px; border: 1px   #52B4FC; padding: 5px 5px;  " />  
                            </p:column>  
                                                
                         <p:column id="fecha_asignacion" headerText="fecha_asignacion" sortBy="#{bancot.fecha_asignacion}"  >  
                                <h:outputText value="#{bancot.fecha_asignacion}" />  
                            </p:column> 
                         
                         <p:column id="fecha_estatus" headerText="fecha_estatus"  sortBy="#{bancot.fecha_estatus}" >  
                                <h:outputText value="#{bancot.fecha_estatus}" />  
                            </p:column> 
                         
                          <p:column id="fecha_cierre" headerText="fecha_cierre"   >  
                                <h:outputText value="#{bancot.fecha_cierre}" />  
                            </p:column> 
                         
                         <p:column id="prioridad" headerText="prioridad" style=" width: 150px;" sortBy="#{bancot.prioridad}" >  
                              <h:outputText value="#{bancot.prioridad}"  style="background-color: #{bancot.codigop};  color: #fff; border-radius:10px; border: 1px   #52B4FC; padding: 5px 5px;  " />    
                            </p:column> 
                       
                                             
                     </p:dataTable>
                             
                    
                         
                    
                                          
              </p:panelGrid>  
              
                     
                </h:form>
        
                     
      

 
        
        
  <p:dialog modal="true" widgetVar="statusDialog"   
                      closable="false"  
                      resizable="false"
                      showEffect="drop"
                      hideEffect="drop"
                      showHeader="false"
                      position="center"
                      style="border: none; box-shadow: none;  background: transparent; "  
                      styleClass="estatusdiag"
                      >  
               <p:graphicImage value="../resources/images/ajax_att.gif"  />   
    </p:dialog> 


        
   
        
    </body>
</html>
